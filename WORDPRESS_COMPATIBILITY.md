# WordPresså…¼å®¹æ€§åŠŸèƒ½é…ç½®è¯´æ˜

## âœ… é…ç½®çŠ¶æ€ï¼šå·²å®Œæˆ
R2å­˜å‚¨æ¡¶ `ai-html-generator-temp-images` å·²æˆåŠŸé‡æ–°åˆ›å»ºå’Œé…ç½®ã€‚

## ğŸ†• æ–°å¢åŠŸèƒ½
WordPresså…¼å®¹æ€§æ¨¡å¼è‡ªåŠ¨å°†Base64å›¾ç‰‡è½¬æ¢ä¸ºHTTP URLï¼Œä¾¿äºWordPressè‡ªåŠ¨ä¸‹è½½å’Œæœ¬åœ°åŒ–å›¾ç‰‡ã€‚

## ğŸ“‹ é…ç½®æ­¥éª¤ (å·²å®Œæˆ)

### 1. åˆ›å»ºR2å­˜å‚¨æ¡¶ âœ…
```bash
# R2å­˜å‚¨æ¡¶å·²åˆ›å»ºå¹¶éªŒè¯
npx wrangler r2 bucket create ai-html-generator-temp-images
# çŠ¶æ€ï¼šâœ… æˆåŠŸåˆ›å»ºäº 2025-10-11T18:19:02.850Z
# ä½ç½®ï¼šWNAM (è¥¿åŒ—ç¾æ´²)
```

### 2. cors.json é…ç½®æ–‡ä»¶
åˆ›å»º `cors.json` æ–‡ä»¶ï¼š
```json
{
  "rules": [
    {
      "allowedOrigins": ["*"],
      "allowedMethods": ["GET", "HEAD"],
      "allowedHeaders": ["*"],
      "maxAgeSeconds": 3600
    }
  ]
}
```

### 3. é…ç½®è‡ªå®šä¹‰åŸŸå (æ¨è)
åœ¨Cloudflareæ§åˆ¶å°ä¸ºR2å­˜å‚¨æ¡¶é…ç½®è‡ªå®šä¹‰åŸŸåï¼š
- é»˜è®¤åŸŸå: `https://pub-xxx.r2.dev`  
- è‡ªå®šä¹‰åŸŸå: `https://temp-images.your-domain.com`

### 4. æ›´æ–°ä»£ç ä¸­çš„åŸŸå
åœ¨ `uploadBase64ToTempR2` å‡½æ•°ä¸­æ›´æ–°åŸŸåï¼š
```typescript
const publicUrl = `https://temp-images.your-domain.com/${filename}`
```

## ğŸ¯ ä½¿ç”¨æ–¹å¼

### ç”¨æˆ·ç«¯
1. å‹¾é€‰"å¯ç”¨WordPresså…¼å®¹æ¨¡å¼" (é»˜è®¤å¯ç”¨)
2. ç”Ÿæˆç½‘é¡µåä¸‹è½½HTMLæ–‡ä»¶
3. å°†HTMLå¯¼å…¥WordPress
4. WordPressè‡ªåŠ¨ä¸‹è½½å›¾ç‰‡å¹¶æœ¬åœ°åŒ–

### å¼€å‘è€…ç»´æŠ¤
```bash
# æŸ¥çœ‹ä¸´æ—¶å­˜å‚¨ç»Ÿè®¡
curl https://your-app.pages.dev/api/stats/temp-storage

# æ‰‹åŠ¨æ¸…ç†è¿‡æœŸæ–‡ä»¶
curl -X POST https://your-app.pages.dev/api/cleanup/expired-images

# å®šæ—¶æ¸…ç† (æ¨èè®¾ç½®Cron Triggers)
# åœ¨Cloudflareæ§åˆ¶å°è®¾ç½®æ¯æ—¥è‡ªåŠ¨æ¸…ç†
```

## âš ï¸ é‡è¦è¯´æ˜

### å›¾ç‰‡æœ‰æ•ˆæœŸ
- **ä¸´æ—¶é“¾æ¥**: 6å°æ—¶æœ‰æ•ˆæœŸ
- **ç”¨é€”**: ä»…ä¾›WordPresså¯¼å…¥æ—¶ä¸‹è½½ï¼Œä¸é€‚åˆé•¿æœŸä½¿ç”¨
- **æ¸…ç†**: æ¯æ—¥è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ–‡ä»¶

### å­˜å‚¨æˆæœ¬
- **å…è´¹é¢åº¦**: Cloudflare R2 æ¯æœˆ10GBå…è´¹å­˜å‚¨
- **å¸¦å®½**: Class Aæ“ä½œ (ä¸Šä¼ ) æ¯æœˆ1ç™¾ä¸‡æ¬¡å…è´¹
- **ä¼°ç®—**: æ¯å¼ å›¾ç‰‡çº¦1-3MBï¼Œå¯æ”¯æŒå¤§çº¦3000-10000å¼ ä¸´æ—¶å›¾ç‰‡

### æ€§èƒ½å½±å“
- **ç”Ÿæˆæ—¶é—´**: å¢åŠ 1-3ç§’ (å›¾ç‰‡ä¸Šä¼ æ—¶é—´)
- **å¹¶å‘é™åˆ¶**: å—R2 APIé™åˆ¶å½±å“
- **é™çº§ç­–ç•¥**: ä¸Šä¼ å¤±è´¥æ—¶è‡ªåŠ¨é™çº§åˆ°å ä½ç¬¦

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **ä¸Šä¼ å¤±è´¥**: æ£€æŸ¥R2å­˜å‚¨æ¡¶æ˜¯å¦æ­£ç¡®åˆ›å»ºå’Œé…ç½®
2. **åŸŸåè®¿é—®å¤±è´¥**: ç¡®è®¤è‡ªå®šä¹‰åŸŸåDNSè®¾ç½®
3. **CORSé”™è¯¯**: æ£€æŸ¥å­˜å‚¨æ¡¶CORSé…ç½®
4. **å›¾ç‰‡æ— æ³•æ˜¾ç¤º**: ç¡®è®¤å›¾ç‰‡URLæ ¼å¼å’Œæœ‰æ•ˆæœŸ

### è°ƒè¯•å‘½ä»¤
```bash
# æµ‹è¯•R2å­˜å‚¨æ¡¶è¿æ¥
npx wrangler r2 object list ai-html-generator-temp-images

# æŸ¥çœ‹å•ä¸ªæ–‡ä»¶ä¿¡æ¯  
npx wrangler r2 object get ai-html-generator-temp-images/temp/xxx/image.jpg --local
```